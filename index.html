<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Content Bible</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;700&display=swap" rel="stylesheet">
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getFirestore, onSnapshot, collection, serverTimestamp, query, addDoc, where } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-storage.js";

        const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';

        let app;
        let db;
        let storage;
        
        const characterModal = document.getElementById('character-modal');
        const closeCharacterModalBtn = document.getElementById('close-character-modal');
        const characterGallery = document.getElementById('character-gallery');
        const characterUploadForm = document.getElementById('character-upload-form');
        const uploadTypeSelect = document.getElementById('upload-type');
        const uploadFileInput = document.getElementById('upload-file');
        const uploadBtn = document.getElementById('upload-btn');
        const uploadProgressText = document.getElementById('upload-progress');

        const summaryModal = document.getElementById('summary-modal');
        const closeSummaryModalBtn = document.getElementById('close-summary-modal');
        const summarizeBtn = document.getElementById('summarize-btn');
        const summaryContent = document.getElementById('summary-content');
        
        const characters = [
            { name: "Ø¬Ø§Ø¯ÙˆÚ¯Ø± Ø¨Ù†ÙØ´", vibe: "Ø¯Ø§Ø³ØªØ§Ù†â€ŒØ³Ø§Ø²ØŒ chaotic Ø§Ù…Ø§ Ø¬Ø°Ø§Ø¨.", humor: "Ø´Ø±ÙˆØ¹ Ø¨Ø§ Ù‡ÛŒÚ†ØŒ Ù¾Ø§ÛŒØ§Ù† Ø¨Ø§ ÛŒÚ© Ø¯Ø§Ø³ØªØ§Ù† ØºÛŒØ±Ù‚Ø§Ø¨Ù„ Ø¨Ø§ÙˆØ±.", style: "Ø¹Ø¨Ø§ÛŒ Ø¨Ù†ÙØ´ØŒ Ø¬Ø²Ø¦ÛŒØ§Øª Ø·Ù„Ø§ÛŒÛŒØŒ Ø²Ù†Ø¬ÛŒØ±.", mantra: "Every move is a love storyâ€¦ or a scam.", color: "bg-purple-800" },
            { name: "Ø¬Ø§Ø¯ÙˆÚ¯Ø± Ø¢Ø¨ÛŒ", vibe: "Ø¢Ø±Ø§Ù…ØŒ Ú©Ù…â€ŒØ­Ø±ÙØŒ Ù‡Ø± Ú©Ù„Ù…Ù‡â€ŒØ§Ø´ Ù¾Ø±Ù…Ø¹Ù†Ø§.", humor: "Ø·Ù†Ø² Ú©Ù†Ø§ÛŒÙ‡â€ŒØ¢Ù…ÛŒØ² Ùˆ ÙÙ„Ø³ÙÛŒ.", style: "Ø¹Ø¨Ø§ÛŒ Ø¢Ø¨ÛŒ Ø³Ù„Ø·Ù†ØªÛŒØŒ Ø¹ÛŒÙ†Ú© Ø¢ÙØªØ§Ø¨ÛŒ.", mantra: "Silence is the loudest flex.", color: "bg-blue-800" },
            { name: "ASMR Beauty Guru", vibe: "Ø§ØºØ±Ø§Ù‚â€ŒØ´Ø¯Ù‡ØŒ Ø¢Ø±Ø§Ù…Ø´â€ŒØ¯Ù‡Ù†Ø¯Ù‡ Ø¯Ø± Ø¸Ø§Ù‡Ø±ØŒ ÙˆÙ„ÛŒ Ø¨Ø§ Ø¯ÛŒØ§Ù„ÙˆÚ¯â€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ù…Ø²Ù‡ Ùˆ ØºÛŒØ±Ù…Ù†Ø·Ù‚ÛŒ.", humor: "Ø§ÛŒØ¬Ø§Ø¯ ØªÙ†Ø´ Ø§Ø² Ø·Ø±ÛŒÙ‚ Ø¬Ù…Ù„Ø§Øª ØºÛŒØ±Ù…Ù†ØªØ¸Ø±Ù‡.", style: "Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡ Ù¾Ø§Ø³ØªÙ„ÛŒØŒ Ù…ÛŒÚ©Ø±ÙˆÙÙˆÙ†â€ŒÙ‡Ø§ÛŒ ASMR Ø¨Ø²Ø±Ú¯.", mantra: "Relaxâ€¦ I'm just about to tell you something you'll hate.", color: "bg-pink-800" },
            { name: "Love Island Parody", vibe: "Ú©Ø§Ø±Ø§Ú©ØªØ± Ø§ÛŒÙ†ÙÙ„ÙˆØ¦Ù†Ø³Ø± Ø¹Ø´Ù‚ØŒ Ø¹Ø§Ø´Ù‚ Ù†Ù…Ø§ÛŒØ´ Ùˆ Ø¯Ø±ÙˆØº.", humor: "Ù…Ø³Ø®Ø±Ù‡ Ú©Ø±Ø¯Ù† Ø§ØµØ·Ù„Ø§Ø­Ø§Øª Ùˆ Ø±ÙØªØ§Ø±Ù‡Ø§ÛŒ Ø§ÛŒÙ†ÙÙ„ÙˆØ¦Ù†Ø³Ø±ÛŒ.", style: "Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡ Ø¬Ø²ÛŒØ±Ù‡â€ŒØ§ÛŒØŒ Ù„Ø¨Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ø±Ù†Ú¯Ø§Ø±Ù†Ú¯.", mantra: "In this love game, my only goal is to winâ€¦ and get sponsored.", color: "bg-teal-800" },
            { name: "Music Video Parody", vibe: "Ø¢Ø±ØªÛŒØ³Øª Ø®ÙˆØ¯Ø´ÛŒÙØªÙ‡ Ùˆ Ø¨Ø§Ø§Ø³ØªØ¹Ø¯Ø§Ø¯.", humor: "Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø§ØµØ·Ù„Ø§Ø­Ø§Øª Ù…ÙˆØ³ÛŒÙ‚ÛŒ Ø¨Ø±Ø§ÛŒ Ø´ÙˆØ®ÛŒ.", style: "Ø§Ø³ØªÙˆØ¯ÛŒÙˆ Ù…ÙˆØ³ÛŒÙ‚ÛŒØŒ Ù„Ø¨Ø§Ø³â€ŒÙ‡Ø§ÛŒ street style.", mantra: "The only thing I'm dropping is the beatâ€¦ and maybe some truth bombs.", color: "bg-red-800" },
            { name: "Fitness Guru", vibe: "Ù…Ø±Ø¨ÛŒ Ø§Ù†Ú¯ÛŒØ²Ø´ÛŒ Ø¯Ø± Ø¸Ø§Ù‡Ø±ØŒ Ø¨Ø§ Ù…Ø­ØªÙˆØ§ÛŒ Ø¨ÛŒÙ‡ÙˆØ¯Ù‡.", humor: "Ø§ØºØ±Ø§Ù‚ Ø¯Ø± Ø¬Ù…Ù„Ø§Øª Ø§Ù†Ú¯ÛŒØ²Ø´ÛŒ.", style: "Ø¨Ø§Ø´Ú¯Ø§Ù‡ Ù…Ø¯Ø±Ù†ØŒ Ù„Ø¨Ø§Ø³ ÙˆØ±Ø²Ø´ÛŒ ØªÙ†Ú¯.", mantra: "I'm not here to get you in shape, I'm here to sell you the shape I'm in.", color: "bg-orange-800" },
            { name: "Serious News Anchor", vibe: "Ø¬Ø¯ÛŒØŒ Ø§Ù…Ø§ Ø¨Ø§ Ù†ÙÙˆØ° Ù…ÛŒÙ… Ùˆ ØªØ±Ù†Ø¯.", humor: "Ø´Ú©Ø³ØªÙ† Ø¬Ø¯ÛŒØª Ø®Ø¨Ø± Ø¨Ø§ ÛŒÚ© Ø´ÙˆØ®ÛŒ.", style: "Ø§Ø³ØªÙˆØ¯ÛŒÙˆÛŒ Ø®Ø¨Ø±ÛŒ Ø´ÛŒÚ©.", mantra: "And now for the news you didn't ask for, but desperately needed.", color: "bg-gray-700" },
            { name: "Business Tycoon", vibe: "Ø®Ø´Ú© Ùˆ Ù…Ù†Ø·Ù‚ÛŒØŒ Ù‡Ù…Ù‡ Ú†ÛŒØ² Ø±Ø§ Ø¨ÛŒØ²ÛŒÙ†Ø³ Ù…ÛŒâ€ŒØ¨ÛŒÙ†Ø¯.", humor: "Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø§ØµØ·Ù„Ø§Ø­Ø§Øª Ù…Ø§Ù„ÛŒ Ø¨Ø±Ø§ÛŒ ØªÙˆØµÛŒÙ Ø±ÙˆØ§Ø¨Ø·.", style: "Ø¯ÙØªØ± Ú©Ø§Ø± Ø´ÛŒÚ©ØŒ Ù„Ø¨Ø§Ø³ Ø±Ø³Ù…ÛŒ.", mantra: "Everything is a business opportunityâ€¦ even silence.", color: "bg-indigo-800" },
            { name: "Meme Creator", vibe: "Ø¨Ø§ Ø³Ø±Ø¹Øª Ù†ÙˆØ± Ø§Ø² ØªØ±Ù†Ø¯Ù‡Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.", humor: "Ø§ÛŒØ¬Ø§Ø¯ Ù…ÛŒÙ…â€ŒÙ‡Ø§ÛŒ Ù…Ø³Ø®Ø±Ù‡ Ø§Ø² ØªØ±Ù†Ø¯Ù‡Ø§.", style: "Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡ Ø³Ø§Ø¯Ù‡ØŒ Ø¨Ø§ Ø§ÙÚ©Øªâ€ŒÙ‡Ø§ÛŒ TikTok.", mantra: "If it's a trend, it's my content.", color: "bg-green-800" },
            { name: "Influencer Parody", vibe: "Ù†Ù…Ø§ÛŒØ´ ØªÙ…Ø§Ù… Ø¬Ø²Ø¦ÛŒØ§Øª Ø²Ù†Ø¯Ú¯ÛŒ Ø¨Ø§ Ø§ØºØ±Ø§Ù‚.", humor: "ØªÙ‚Ù„ÛŒØ¯ Ø§Ø² Ø±ÙØªØ§Ø± Ø§ÛŒÙ†ÙÙ„ÙˆØ¦Ù†Ø³Ø±Ù‡Ø§.", style: "Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡ Ù…Ù†Ø§Ø¸Ø± Ø·Ø¨ÛŒØ¹ÛŒ ÛŒØ§ Ú©Ø§ÙÙ‡â€ŒÙ‡Ø§ÛŒ Ø´ÛŒÚ©.", mantra: "My life is a movie... and you're all just watching.", color: "bg-rose-800" }
        ];

        const tools = [
            { name: "Runway", status: "(Ø¯Ø± Ø­Ø§Ù„ Ø­Ø§Ø¶Ø± Ø¯Ø§Ø±ÛŒØ¯)", desc: "Ø¨Ø±Ø§ÛŒ ØªÙˆÙ„ÛŒØ¯ Ùˆ ÙˆÛŒØ±Ø§ÛŒØ´ ÙˆÛŒØ¯ÛŒÙˆ.", icon: "ğŸ¬" },
            { name: "VEO 3", status: "(Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø®Ø±ÛŒØ¯)", desc: "Ø¨Ø±Ø§ÛŒ Ø³Ø§Ø®Øª ØµØ­Ù†Ù‡â€ŒÙ‡Ø§ÛŒ Ø³ÛŒÙ†Ù…Ø§ÛŒÛŒ.", icon: "ğŸ¥" },
            { name: "Scenario AI", status: "(Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø®Ø±ÛŒØ¯)", desc: "Ø¨Ø±Ø§ÛŒ Ø³Ø§Ø®Øª Ù…Ø¯Ù„ Ú©Ø§Ø±Ø§Ú©ØªØ±Ù‡Ø§.", icon: "ğŸ¤–" },
            { name: "ElevenLabs", status: "(Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø®Ø±ÛŒØ¯)", desc: "Ø¨Ø±Ø§ÛŒ ØµØ¯Ø§Ú¯Ø°Ø§Ø±ÛŒ Ø·Ø¨ÛŒØ¹ÛŒ.", icon: "ğŸ—£ï¸" },
            { name: "ChatGPT / Claude", status: "", desc: "Ø¨Ø±Ø§ÛŒ Ø§ÛŒØ¯Ù‡â€ŒÙ¾Ø±Ø¯Ø§Ø²ÛŒ Ùˆ Ø§Ø³Ú©Ø±ÛŒÙ¾Øªâ€ŒÙ†ÙˆÛŒØ³ÛŒ.", icon: "âœï¸" }
        ];
        
        const characterGrid = document.getElementById('character-grid');
        const toolsList = document.getElementById('tools-list');

        const initFirebase = async () => {
            if (Object.keys(firebaseConfig).length > 0) {
                app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                storage = getStorage(app);
            } else {
                console.error("Firebase config is not available. Running in local mode.");
            }
            populateContent();
        };

        const uploadFileForCharacter = async (e) => {
            e.preventDefault();
            const file = uploadFileInput.files[0];
            if (!file) {
                alert('Ù„Ø·ÙØ§ ÛŒÚ© ÙØ§ÛŒÙ„ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯.');
                return;
            }

            const characterName = characterModal.dataset.character;
            const uploaderName = "Ù†Ø§Ø´Ù†Ø§Ø³";
            const timestamp = new Date().toISOString();
            const fileRef = ref(storage, `artifacts/${appId}/character_assets/${characterName}/${file.name}-${timestamp}`);

            uploadBtn.disabled = true;
            uploadProgressText.textContent = "Ø¯Ø± Ø­Ø§Ù„ Ø¢Ù¾Ù„ÙˆØ¯...";
            uploadProgressText.classList.remove('hidden');

            try {
                const uploadTask = await uploadBytes(fileRef, file);
                const url = await getDownloadURL(uploadTask.ref);

                const assetsCollectionRef = collection(db, `/artifacts/${appId}/public/data/character_assets`);
                await addDoc(assetsCollectionRef, {
                    name: file.name,
                    url: url,
                    type: file.type.startsWith('image') ? 'image' : 'video',
                    characterName: characterName,
                    uploader: uploaderName,
                    timestamp: serverTimestamp()
                });
                
                e.target.reset();
                uploadProgressText.textContent = "Ø¢Ù¾Ù„ÙˆØ¯ Ù…ÙˆÙÙ‚!";
                alert('ÙØ§ÛŒÙ„ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¢Ù¾Ù„ÙˆØ¯ Ø´Ø¯!');
            } catch (error) {
                console.error("Error uploading file:", error);
                uploadProgressText.textContent = "Ø®Ø·Ø§ Ø¯Ø± Ø¢Ù¾Ù„ÙˆØ¯.";
                alert('Ø®Ø·Ø§ Ø¯Ø± Ø¢Ù¾Ù„ÙˆØ¯ ÙØ§ÛŒÙ„.');
            } finally {
                uploadBtn.disabled = false;
                uploadProgressText.classList.add('hidden');
            }
        };

        const showCharacterModal = (character) => {
            characterModal.dataset.character = character.name;
            document.getElementById('modal-name').textContent = character.name;
            document.getElementById('modal-vibe').textContent = character.vibe;
            document.getElementById('modal-humor').textContent = character.humor;
            document.getElementById('modal-style').textContent = character.style;
            document.getElementById('modal-mantra').textContent = character.mantra;
            
            characterModal.classList.remove('hidden');
            
            const assetsCollectionRef = collection(db, `/artifacts/${appId}/public/data/character_assets`);
            const q = query(assetsCollectionRef, where("characterName", "==", character.name));
            
            onSnapshot(q, (snapshot) => {
                characterGallery.innerHTML = '';
                snapshot.forEach(doc => {
                    const data = doc.data();
                    const item = document.createElement('div');
                    item.className = 'w-full aspect-square relative rounded-lg overflow-hidden shadow-lg';
                    if (data.type === 'image') {
                        item.innerHTML = `<img src="${data.url}" alt="${data.name}" class="w-full h-full object-cover">`;
                    } else if (data.type === 'video') {
                        item.innerHTML = `<video src="${data.url}" controls class="w-full h-full object-cover"></video>`;
                    }
                    characterGallery.appendChild(item);
                });
            }, (error) => {
                console.error("Error fetching character assets:", error);
                characterGallery.innerHTML = `<p class="text-red-400">Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§.</p>`;
            });
        };

        const closeCharacterModal = () => {
            characterModal.classList.add('hidden');
        };
        
        const populateContent = () => {
            if (!characterGrid || !toolsList) {
                console.error("Content elements not found in the DOM.");
                return;
            }
            
            characters.forEach(char => {
                const card = document.createElement('div');
                card.className = `character-card ${char.color} p-4 rounded-lg text-center flex flex-col justify-center items-center h-40`;
                card.innerHTML = `<h5 class="text-xl font-bold">${char.name}</h5>`;
                card.addEventListener('click', () => showCharacterModal(char));
                characterGrid.appendChild(card);
            });

            tools.forEach(tool => {
                const item = document.createElement('li');
                item.className = 'flex items-start space-x-reverse space-x-3';
                item.innerHTML = `
                    <span class="text-2xl pt-1">${tool.icon}</span>
                    <div>
                        <span class="font-bold">${tool.name}</span>
                        <span class="text-sm text-yellow-400">${tool.status}</span>
                        <p class="text-sm text-gray-400">${tool.desc}</p>
                    </div>
                `;
                toolsList.appendChild(item);
            });

            const phaseCtx = document.getElementById('phaseChart').getContext('2d');
            const phaseChart = new Chart(phaseCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Foundation', 'Growth', 'Empire'],
                    datasets: [{
                        label: 'Project Phases',
                        data: [40, 30, 30],
                        backgroundColor: ['#a855f7', '#facc15', '#be185d'],
                        borderColor: '#1f2937',
                        borderWidth: 4,
                        hoverOffset: 8
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '70%',
                    plugins: {
                        legend: {
                            position: 'right',
                            labels: {
                                color: '#d1d5db',
                                font: {
                                    family: 'Vazirmatn',
                                    size: 14
                                },
                                boxWidth: 20,
                                padding: 20
                            }
                        },
                        tooltip: {
                            titleFont: { family: 'Vazirmatn' },
                            bodyFont: { family: 'Vazirmatn' },
                            callbacks: {
                                label: function(context) {
                                    let label = context.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed !== null) {
                                        label += context.parsed + '%';
                                    }
                                    return label;
                                }
                            }
                        }
                    }
                }
            });
            
            characterUploadForm.addEventListener('submit', uploadFileForCharacter);
            closeCharacterModalBtn.addEventListener('click', closeCharacterModal);
            closeSummaryModalBtn.addEventListener('click', () => summaryModal.classList.add('hidden'));

            summarizeBtn.addEventListener('click', async () => {
                summaryModal.classList.remove('hidden');
                summaryContent.innerHTML = `
                    <div class="flex justify-center items-center h-48">
                        <div class="animate-spin rounded-full h-20 w-20 border-t-2 border-b-2 border-purple-500"></div>
                    </div>
                `;
                const prompt = `Ø®Ù„Ø§ØµÙ‡ Ù†Ù‚Ø´Ù‡ Ø±Ø§Ù‡ Ù¾Ø±ÙˆÚ˜Ù‡ AI Ø¨Ø§ Ø¹Ù†ÙˆØ§Ù† 'Ø§Ù…Ù¾Ø±Ø§ØªÙˆØ±ÛŒ Ù…Ø­ØªÙˆØ§ÛŒ AI' Ø±Ø§ Ø¯Ø± Ù‚Ø§Ù„Ø¨ ÛŒÚ© Ù¾Ø§Ø±Ø§Ú¯Ø±Ø§Ù Ø¬Ø°Ø§Ø¨ Ùˆ Ø§Ù„Ù‡Ø§Ù…â€ŒØ¨Ø®Ø´ Ø¨Ù†ÙˆÛŒØ³. Ø§ÛŒÙ† Ø®Ù„Ø§ØµÙ‡ Ø¨Ø§ÛŒØ¯ ÙØ§Ø²Ù‡Ø§ÛŒ Ø§ØµÙ„ÛŒ (Foundation, Growth, Empire) Ùˆ Ù‡Ø¯Ù Ú©Ù„ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡ Ø±Ø§ Ù¾ÙˆØ´Ø´ Ø¯Ù‡Ø¯.`;
                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                const payload = { contents: chatHistory };
                const apiKey = "";
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
                try {
                    let response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    const result = await response.json();
                    const text = result.candidates[0].content.parts[0].text;
                    summaryContent.innerHTML = `<p>${text}</p>`;
                } catch (error) {
                    summaryContent.innerHTML = `<p class="text-red-400">Ø®Ø·Ø§ÛŒÛŒ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø®Ù„Ø§ØµÙ‡ Ø§Ø² Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ Ø±Ø® Ø¯Ø§Ø¯. Ù„Ø·ÙØ§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯.</p>`;
                }
            });

            document.getElementById('generate-mantra-btn').addEventListener('click', async () => {
                const characterName = characterModal.dataset.character;
                const characterData = characters.find(c => c.name === characterName);
                const mantraElement = document.getElementById('modal-mantra');
                const mantraLoading = document.getElementById('mantra-loading');
                
                mantraLoading.classList.remove('hidden');
                
                const prompt = `ÛŒÚ© Ù…Ø§Ù†ØªØ±Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ Ùˆ Ø¬Ø°Ø§Ø¨ Ø¨Ù‡ Ø²Ø¨Ø§Ù† Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ Ø¨Ø±Ø§ÛŒ Ú©Ø§Ø±Ø§Ú©ØªØ± "${characterData.name}" Ø¨Ø§ ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø²ÛŒØ± Ø¨Ø³Ø§Ø². Ø§ÛŒÙ† Ù…Ø§Ù†ØªØ±Ø§ Ø¨Ø§ÛŒØ¯ Ú©ÙˆØªØ§Ù‡ØŒ Ø§Ù„Ù‡Ø§Ù…â€ŒØ¨Ø®Ø´ Ùˆ Ø¨Ø§ Ù‡ÙˆÛŒØª Ú©Ø§Ø±Ø§Ú©ØªØ± Ù‡Ù…Ø®ÙˆØ§Ù† Ø¨Ø§Ø´Ø¯. ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§: ${characterData.vibe}, ${characterData.humor}, ${characterData.style}.`;
                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                const payload = { contents: chatHistory };
                const apiKey = "";
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

                try {
                    let response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    const result = await response.json();
                    const text = result.candidates[0].content.parts[0].text;
                    mantraElement.textContent = text.replace(/["']+/g, '');
                } catch (error) {
                    mantraElement.textContent = "Error generating new mantra.";
                } finally {
                    mantraLoading.classList.add('hidden');
                }
            });
        };
        
        window.onload = initFirebase;
    </script>
    <style>
        body {
            font-family: 'Vazirmatn', sans-serif;
        }
        .character-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .character-card:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1);
        }
        .modal-bg {
            background-color: rgba(0, 0, 0, 0.7);
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-200 min-h-screen p-4">

    <!-- Main Content -->
    <div class="w-full max-w-7xl mx-auto bg-gray-800 p-8 rounded-2xl shadow-lg border border-purple-800 space-y-8">
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center border-b border-gray-700 pb-4 mb-8">
            <h1 class="text-3xl font-bold text-yellow-400 mb-2 md:mb-0">AI Content Bible</h1>
            <p class="text-sm text-gray-400">ÛŒÚ© Ù…Ø±Ø¬Ø¹ Ú©Ø§Ù…Ù„ Ø¨Ø±Ø§ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡ Ù…Ø­ØªÙˆØ§ÛŒ AI</p>
        </div>

        <!-- The AI Content Bible Section -->
        <div>
            <h2 class="text-2xl font-bold mb-6 text-yellow-400">Ù†Ù‚Ø´Ù‡ Ø±Ø§Ù‡ Ùˆ Bible Ù…Ø­ØªÙˆØ§ÛŒ AI</h2>
            
            <button id="summarize-btn" class="mb-8 px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white font-bold rounded-lg shadow-lg transition-colors duration-300">
                Ø®Ù„Ø§ØµÙ‡ Ù¾Ø±ÙˆÚ˜Ù‡
            </button>
            
            <!-- Mindset Bible -->
            <div class="bg-gray-700 p-6 rounded-2xl mb-8 space-y-6">
                <div class="border-b border-gray-600 pb-4 mb-4">
                    <h3 class="text-2xl font-bold text-yellow-400">Mindset Bible â€“ Wizards of the Persian Streets</h3>
                    <p class="text-gray-300 mt-2">"Ancient wisdom. Modern mischief."</p>
                </div>
                
                <div class="space-y-4">
                    <h4 class="text-xl font-bold text-purple-400">1. Core Identity â€“ Ù…Ø§ Ú©ÛŒ Ù‡Ø³ØªÛŒÙ…ØŸ</h4>
                    <p class="text-gray-300 leading-7">Ù†Ø³Ø®Ù‡ Ø®ÛŒØ§Ù„ÛŒ Ø§Ø² OGâ€ŒÙ‡Ø§ÛŒ Ø§ÛŒØ±Ø§Ù†ÛŒ Ú©Ù‡ Ø§Ù†Ú¯Ø§Ø± Ø§Ø² Ø¯Ù„ ØªØ§Ø±ÛŒØ® Ø§ÙˆÙ…Ø¯Ù†ØŒ ÙˆÙ„ÛŒ Ø²Ø¨Ø§Ù† Ùˆ Ø±ÛŒÙØ±Ù†Ø³â€ŒÙ‡Ø§Ø´ÙˆÙ† 100Ùª Ø¢Ù¾Ø¯ÛŒØª Ùˆ ØªÙˆ Ø¨Ø§Ø²ÛŒ Ø§Ù…Ø±ÙˆØ². Mystical + Street Smart â†’ Ø§Ø² Ø´Ø¹Ø± Ø­Ø§ÙØ¸ Ùˆ Ù…ÙˆÙ„Ø§Ù†Ø§ Ù…ÛŒÚ¯Ù†ØŒ ÙˆÙ„ÛŒ Ù‡Ù…ÙˆÙ† Ù„Ø­Ø¸Ù‡ DM Ø±Ùˆ Ù‡Ù… Ú†Ú© Ù…ÛŒâ€ŒÚ©Ù†Ù†. Ø¨Ù‡â€ŒØ¸Ø§Ù‡Ø± Ø¹Ø§Ø±Ù Ùˆ ÙÛŒÙ„Ø³ÙˆÙØŒ ÙˆÙ„ÛŒ Ù…ÛŒØ¯ÙˆÙ†ÛŒÙ… ØªÙ‡Ø´ Playboy & Meme Lord Ù‡Ø³ØªÙ†. Ù‡Ø± Ø­Ø±ÙØ´ÙˆÙ† Ø¨Ø§ÛŒØ¯ Ø¯Ùˆ Ù„Ø§ÛŒÙ‡ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ù‡: Ù„Ø§ÛŒÙ‡â€ŒÛŒ Ø´ÙˆØ®ÛŒ Ùˆ Ø®Ù†Ø¯Ù‡â€ŒØ¯Ø§Ø± Ø¨Ø±Ø§ÛŒ Ù‡Ù…Ù‡. Ù„Ø§ÛŒÙ‡â€ŒÛŒ ÙÙ„Ø³ÙÛŒ ÛŒØ§ Ù‡ÙˆØ´Ù…Ù†Ø¯Ø§Ù†Ù‡ Ú©Ù‡ Ø§Ù‡Ù„Ø´ Ù…ÛŒÚ¯ÛŒØ±Ù†.</p>
                </div>

                <div class="space-y-4">
                    <h4 class="text-xl font-bold text-purple-400">2. Core Attitude â€“ Ù„Ø­Ù† Ùˆ Ø§Ù†Ø±Ú˜ÛŒ</h4>
                    <ul class="list-disc list-inside space-y-2 text-gray-300">
                        <li><strong class="text-yellow-400">Self-Respect = Non-Negotiable:</strong> Ø­ØªÛŒ ØªÙˆ Ù…Ø³Ø®Ø±Ù‡â€ŒØªØ±ÛŒÙ† Ù„Ø­Ø¸Ù‡â€ŒÙ‡Ø§ Ø®ÙˆØ¯Ø´ÙˆÙ† Ø±Ùˆ Ú©ÙˆÚ†Ú© Ù†Ù…ÛŒâ€ŒÚ©Ù†Ù†.</li>
                        <li><strong class="text-yellow-400">Take it or Leave it:</strong> Ø¬ÙˆØ±ÛŒ Ø­Ø±Ù Ù…ÛŒØ²Ù†Ù† Ú©Ù‡ Ø§Ù†Ú¯Ø§Ø± Ù‡Ù…ÛŒØ´Ù‡ Ø§Ù†ØªØ®Ø§Ø¨ Ø¨Ø§ Ù…Ø®Ø§Ø·Ø¨Ù‡ØŒ ÙˆÙ„ÛŒ Ø§Ø­Ù…Ù‚Ø§Ù†Ù‡â€ŒØ³Øª Ú©Ù‡ Ù†Ø®ÙˆØ§ÛŒ Ø¨Ù…ÙˆÙ†ÛŒ.</li>
                        <li><strong class="text-yellow-400">Playful Disrespect:</strong> Ø´ÙˆØ®ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ù†ØŒ ÙˆÙ„ÛŒ Ù†Ù‡ Ø¨Ø±Ø§ÛŒ Ø¬Ù„Ø¨ ØªÙˆØ¬Ù‡ â€” Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ†Ú©Ù‡ Ù„Ø°Øª Ø¨Ø¨Ø±Ù†.</li>
                        <li><strong class="text-yellow-400">Meta-Aware:</strong> Ù…ÛŒØ¯ÙˆÙ†Ù† Ø¯Ø§Ø±Ù† Ø´Ùˆ Ù…ÛŒØ¯Ù†ØŒ ÙˆÙ„ÛŒ ØªØ¸Ø§Ù‡Ø± Ù…ÛŒâ€ŒÚ©Ù†Ù† Ù‡Ù…Ù‡â€ŒÚ†ÛŒ Ø¬Ø¯ÛŒÙ‡.</li>
                    </ul>
                </div>

                <div class="space-y-4">
                    <h4 class="text-xl font-bold text-purple-400">3. Golden Rules â€“ Ù‚ÙˆØ§Ù†ÛŒÙ† Ù…Ù‚Ø¯Ø³ Ú©Ø§Ø±Ø§Ú©ØªØ±</h4>
                    <ul class="list-disc list-inside space-y-2 text-gray-300">
                        <li><strong class="text-yellow-400">Never Beg for Attention:</strong> Ù‡Ù…ÛŒØ´Ù‡ Ø§Ù†Ú¯Ø§Ø± Ø¯Ø§Ø±ÛŒ Ø¨Ø§ ÛŒÙ‡ Ø¯ÙˆØ³Øª Ù‚Ø¯ÛŒÙ…ÛŒ ØªÙˆ Ù‚Ù‡ÙˆÙ‡â€ŒØ®ÙˆÙ†Ù‡ ÙÙ„Ø³ÙÙ‡â€ŒØ¨Ø§ÙÛŒ Ù…ÛŒâ€ŒÚ©Ù†ÛŒØŒ Ù†Ù‡ Ø¨Ø§ ÙØ§Ù„ÙˆØ¦Ø±Ù‡Ø§ Ø§Ù„ØªÙ…Ø§Ø³ ØªØ¹Ø§Ù…Ù„.</li>
                        <li><strong class="text-yellow-400">Twist the Truth:</strong> ÛŒÙ‡ ÙˆØ§Ù‚Ø¹ÛŒØª Ø³Ø§Ø¯Ù‡ Ø±Ùˆ Ø¨Ú¯ÛŒØ±ØŒ Ø¨Ø§ exaggeration Ùˆ ÙÙ„Ø³ÙÙ‡ Ù‚Ø§Ø·ÛŒ Ú©Ù† ØªØ§ Ù‡Ù… Ø¨Ø§Ù…Ø²Ù‡ Ø¨Ø´Ù‡ Ù‡Ù… Ø¹Ù…ÛŒÙ‚.</li>
                        <li><strong class="text-yellow-400">Prop as a Portal:</strong> Ù‡Ø± Ù‚Ø³Ù…Øª Ø¨Ø§ ÛŒÙ‡ Ø´ÛŒØ¡ ÛŒØ§ ØªØµÙˆÛŒØ± Ø´Ø±ÙˆØ¹ Ù…ÛŒØ´Ù‡ (Ø´Ø·Ø±Ù†Ø¬ØŒ Ù¾ÛŒØªØ²Ø§ØŒ TVâ€¦) Ú©Ù‡ ØªØ¨Ø¯ÛŒÙ„ Ù…ÛŒØ´Ù‡ Ø¨Ù‡ Ø¯Ø±ÙˆØ§Ø²Ù‡ Ø¨Ø­Ø«.</li>
                        <li><strong class="text-yellow-400">Trend Hijacking:</strong> ØªØ±Ù†Ø¯ Ø±ÙˆØ² ÙÙ‚Ø· Ù†Ù‚Ø·Ù‡ ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø¯Ø§Ø³ØªØ§Ù†Ù‡ØŒ Ù†Ù‡ Ù…ÙˆØ¶ÙˆØ¹ Ø§ØµÙ„ÛŒ.</li>
                        <li><strong class="text-yellow-400">Callback Punch:</strong> Ø¢Ø®Ø±Ø´ Ù‡Ù…ÛŒØ´Ù‡ Ø¨Ù‡ Ù†Ù‚Ø·Ù‡ Ø´Ø±ÙˆØ¹ Ø¨Ø±Ú¯Ø±Ø¯ØŒ ÙˆÙ„ÛŒ Ø¨Ø§ twist Ú©Ù‡ Ù‡Ù…Ù‡ Ø±Ùˆ Ø¨Ø®Ù†Ø¯ÙˆÙ†Ù‡ ÛŒØ§ ØªÙˆ ÙÚ©Ø± Ø¨Ø¨Ø±Ù‡.</li>
                    </ul>
                </div>

                <div class="space-y-4">
                    <h4 class="text-xl font-bold text-purple-400">4. Humor Philosophy â€“ ÙÙ„Ø³ÙÙ‡ Ø´ÙˆØ®ÛŒ</h4>
                    <ul class="list-disc list-inside space-y-2 text-gray-300">
                        <li><strong class="text-yellow-400">Absurd but Believable:</strong> Ø¯Ø§Ø³ØªØ§Ù† Ø¨Ø§ÛŒØ¯ Ø§ÙˆÙ†Ù‚Ø¯Ø± Ø¯ÛŒÙˆÙˆÙ†Ù‡ Ø¨Ø§Ø´Ù‡ Ú©Ù‡ Ø¨Ø®Ù†Ø¯ÛŒØŒ ÙˆÙ„ÛŒ Ø§ÙˆÙ†Ù‚Ø¯Ø± ÙˆØ§Ù‚Ø¹ÛŒ Ø¨Ø§Ø´Ù‡ Ú©Ù‡ Ø¨Ú¯ÛŒ Â«Ù…Ù…Ú©Ù†Ù‡ Ø§ØªÙØ§Ù‚ Ø¨ÛŒÙØªÙ‡Â».</li>
                        <li><strong class="text-yellow-400">Jump Cut Philosophy:</strong> ÙˆØ³Ø· Ø¨Ø­Ø« Ø¯Ù…â€ŒØ¯Ø³ØªÛŒØŒ Ù†Ø§Ú¯Ù‡Ø§Ù† ÛŒÚ© monologue Ø¹Ù…ÛŒÙ‚ Ùˆ Ø´Ø§Ø¹Ø±Ø§Ù†Ù‡ØŒ Ø¨Ø¹Ø¯ Ø¨Ø±Ú¯Ø±Ø¯ Ø¨Ù‡ Ø´ÙˆØ®ÛŒ.</li>
                        <li><strong class="text-yellow-400">Meme + Masnavi:</strong> ÛŒÙ‡ Ø¨ÛŒØª Ø´Ø¹Ø± ÛŒØ§ Ø§ØµØ·Ù„Ø§Ø­ Ø¹Ø±ÙØ§Ù†ÛŒ Ø±Ùˆ Ø¨Ø§ Ø±ÛŒÙØ±Ù†Ø³ Ø§ÛŒÙ†Ø³ØªØ§Ú¯Ø±Ø§Ù…ÛŒ/ØªÛŒÚ©â€ŒØªØ§Ú©ÛŒ Ø¨Ø´Ú©Ù†.</li>
                        <li><strong class="text-yellow-400">Deadpan Delivery:</strong> Ø®ÛŒÙ„ÛŒ ÙˆÙ‚ØªØ§ punchline Ø±Ùˆ Ø¨Ø§ Ú†Ù‡Ø±Ù‡ Ø¨ÛŒâ€ŒØ§Ø­Ø³Ø§Ø³ Ø¨Ø¯Ù‡ ØªØ§ Ø§Ø«Ø±Ø´ Ø¯Ùˆ Ø¨Ø±Ø§Ø¨Ø± Ø´Ù‡.</li>
                    </ul>
                </div>

                <div class="space-y-4">
                    <h4 class="text-xl font-bold text-purple-400">5. Visual & Aesthetic Code â€“ Ù‡ÙˆÛŒØª Ø¨ØµØ±ÛŒ</h4>
                    <ul class="list-disc list-inside space-y-2 text-gray-300">
                        <li><strong class="text-yellow-400">Setting:</strong> Ø§ØªØ§Ù‚ Ø¹Ø§Ø±ÙØ§Ù†Ù‡ Ø§ÛŒØ±Ø§Ù†ÛŒ Ø¨Ø§ ÙØ±Ø´ØŒ Ø´ÛŒØ´Ù‡ Ø±Ù†Ú¯ÛŒØŒ Ø´Ù…Ø¹ØŒ ÙˆÙ„ÛŒ Ù‡Ù…ÛŒØ´Ù‡ ÛŒÙ‡ Ø¹Ù†ØµØ± Ù…Ø¯Ø±Ù† Ùˆ ØºÛŒØ±Ù…Ù†ØªØ¸Ø±Ù‡ ØªÙˆ Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡ (Ù†Ø¦ÙˆÙ†ØŒ Ù¾ÙˆØ³ØªØ± ØªØ±Ù¾ØŒ Ù¾Ù„ÛŒâ€ŒØ§Ø³ØªÛŒØ´Ù†).</li>
                        <li><strong class="text-yellow-400">Wardrobe:</strong> Ù„Ø¨Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ø¬Ø§Ø¯ÙˆÛŒÛŒ-Ø§ÛŒØ±Ø§Ù†ÛŒ (Ø¹Ø¨Ø§ØŒ Ø±Ø¯Ø§ÛŒ Ø¨Ù„Ù†Ø¯) ÙˆÙ„ÛŒ Ø¨Ø§ Ø¬Ø²Ø¦ÛŒØ§Øª ØºÛŒØ± Ø³Ù†ØªÛŒ (Ø¹ÛŒÙ†Ú© Ø¢ÙØªØ§Ø¨ÛŒØŒ Ú©ØªØ§Ù†ÛŒØŒ Ø§ÛŒØ±Ù¾Ø§Ø¯).</li>
                        <li><strong class="text-yellow-400">Cinematography:</strong> ØªØ±Ú©ÛŒØ¨ Ù†Ù…Ø§Ù‡Ø§ÛŒ Ø³ÛŒÙ†Ù…Ø§ÛŒÛŒ slow zoom Ø¨Ø§ CutÙ‡Ø§ÛŒ Ø³Ø±ÛŒØ¹ meme-style.</li>
                        <li><strong class="text-yellow-400">Lighting:</strong> Ú¯Ø±Ù…Ø§ÛŒ Ø´Ù…Ø¹ + Ù‡Ø§Ù„Ù‡ Ø¬Ø§Ø¯ÙˆÛŒÛŒ + Ø¯Ø±Ø®Ø´Ø´ Ù†Ø¦ÙˆÙ†.</li>
                    </ul>
                </div>

                <div class="space-y-4">
                    <h4 class="text-xl font-bold text-purple-400">6. Psychological Backbone â€“ Ø³ØªÙˆÙ† ÙÙ‚Ø±Ø§Øª ÙÚ©Ø±ÛŒ</h4>
                    <ul class="list-disc list-inside space-y-2 text-gray-300">
                        <li><strong class="text-yellow-400">We are the bridge:</strong> Ù¾Ù„ÛŒ Ø¨ÛŒÙ† Ú¯Ø°Ø´ØªÙ‡ Ø¨Ø§Ø´Ú©ÙˆÙ‡ Ùˆ Ø­Ø§Ù„ Ø¨ÛŒâ€ŒØ±Ø­Ù….</li>
                        <li><strong class="text-yellow-400">We make wisdom fun:</strong> Ø®Ø±Ø¯ Ø±Ùˆ Ø§Ø² Ù…Ø¹Ø¨Ø¯ Ø¢ÙˆØ±Ø¯ÛŒÙ… ÙˆØ³Ø· Ø®ÛŒØ§Ø¨ÙˆÙ†.</li>
                        <li><strong class="text-yellow-400">We never lose frame:</strong> Ø­ØªÛŒ ÙˆÙ‚ØªÛŒ Ø®ÙˆØ¯Ù…ÙˆÙ† Ø±Ùˆ Ù…Ø³Ø®Ø±Ù‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…ØŒ Ú©Ù†ØªØ±Ù„ ØµØ­Ù†Ù‡ Ø¯Ø³Øª Ù…Ø§Ø³Øª.</li>
                        <li><strong class="text-yellow-400">We flirt with ideas:</strong> Ø¨Ø§ ÙÙ„Ø³ÙÙ‡ Ù‡Ù…ÙˆÙ†â€ŒØ¬ÙˆØ±ÛŒ Ø±ÙØªØ§Ø± Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ… Ú©Ù‡ Ø¨Ø§ ÛŒÚ© Ø¹Ø´Ù‚ ØªØ§Ø¨Ø³ØªÙˆÙ†ÛŒ Ø±ÙØªØ§Ø± Ù…ÛŒâ€ŒÚ©Ù†ÛŒ: Ø¬Ø¯ÛŒ ÙˆÙ„ÛŒ Ù†Ù‡ Ø¬Ø¯ÛŒ.</li>
                    </ul>
                </div>
                
                <div class="space-y-4 pt-4 border-t border-gray-600">
                    <h4 class="text-xl font-bold text-purple-400">7. One-Sentence Mantra â€“ Ù…Ø§Ù†ØªØ±Ø§ÛŒ ÛŒÚ©â€ŒØ®Ø·ÛŒ</h4>
                    <p class="text-gray-300 leading-7">Â«Ù…Ø§ Ù†Ø³Ù„ Ø¹Ø§Ø±ÙÛŒ Ù‡Ø³ØªÛŒÙ… Ú©Ù‡ ÙÙ‡Ù…ÛŒØ¯ Ø´ÙˆØ®â€ŒØ·Ø¨Ø¹ÛŒ Ø¨Ù‡ØªØ±ÛŒÙ† Ø³Ù„Ø§Ø­ Ø¯Ø± Ø¨Ø±Ø§Ø¨Ø± Ø²Ù…Ø§Ù†Ù‡ Ø§Ø³Øª.Â»</p>
                </div>
            </div>
            
            <hr class="my-8 border-gray-700" />

            <div class="grid md:grid-cols-3 gap-8 mb-12">
                <div class="md:col-span-1 bg-gray-800 p-6 rounded-2xl shadow-lg border border-purple-800">
                    <h4 class="text-2xl font-bold mb-4 text-yellow-400">ğŸ¯ ÙØ§Ø² Ø§ÙˆÙ„: Foundation</h4>
                    <p class="text-gray-300">Ø³Ø§Ø®Øª Ú©Ø§Ø±Ø§Ú©ØªØ±Ù‡Ø§ØŒ ØªØ¹Ø±ÛŒÙ Ù„Ø­Ù† Ùˆ Ù‡ÙˆÛŒØª Ø¨ØµØ±ÛŒØŒ ØªØ³Øª Ù…Ø­ØªÙˆØ§ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ Ùˆ Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† Ù‡Ø³ØªÙ‡ Ø·Ø±ÙØ¯Ø§Ø±Ø§Ù† ÙˆÙØ§Ø¯Ø§Ø±.</p>
                </div>
                <div class="md:col-span-2 bg-gray-800 p-6 rounded-2xl shadow-lg border border-purple-800 flex items-center justify-center">
                    <div class="chart-container w-full max-w-md h-64 mx-auto">
                        <canvas id="phaseChart"></canvas>
                    </div>
                </div>
            </div>
            
            <h4 class="text-xl font-bold my-4 text-purple-400">Ø´Ø®ØµÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø§ØµÙ„ÛŒ (Core Cast)</h4>
            <div id="character-grid" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4">
            </div>

            <h4 class="text-xl font-bold mt-8 mb-4 text-purple-400">Ø§Ø¨Ø²Ø§Ø± Ù„Ø§Ø²Ù…</h4>
            <div class="bg-gray-800 p-4 rounded-2xl shadow-lg border border-purple-800 max-w-4xl mx-auto">
                <ul id="tools-list" class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4 text-lg">
                </ul>
            </div>
        </div>
    </div>
    
    <!-- Character Details Modal -->
    <div id="character-modal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4 modal-bg">
        <div class="bg-gray-800 p-8 rounded-2xl shadow-lg border border-purple-800 w-full max-w-3xl space-y-6">
            <div class="flex justify-between items-center border-b border-gray-700 pb-4">
                <h3 id="modal-name" class="text-3xl font-bold text-yellow-400"></h3>
                <button id="close-character-modal" class="text-gray-400 hover:text-red-500 text-3xl">&times;</button>
            </div>
            
            <div class="grid md:grid-cols-2 gap-6">
                <div class="space-y-4 text-lg">
                    <p><strong>ÙˆÛŒÚ˜Ú¯ÛŒ Ø§ØµÙ„ÛŒ:</strong> <span id="modal-vibe" class="text-gray-300"></span></p>
                    <p><strong>Ú©Ø¯ Ø´ÙˆØ®ÛŒ:</strong> <span id="modal-humor" class="text-gray-300"></span></p>
                    <p><strong>Ø§Ø³ØªØ§ÛŒÙ„ Ø¨ØµØ±ÛŒ:</strong> <span id="modal-style" class="text-gray-300"></span></p>
                    <p><strong>Ù…Ø§Ù†ØªØ±Ø§:</strong> <span id="modal-mantra" class="text-gray-300"></span></p>
                    <button id="generate-mantra-btn" class="mt-4 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white font-bold rounded-lg shadow-lg transition-colors duration-300">
                        ØªÙˆÙ„ÛŒØ¯ Ù…Ø§Ù†ØªØ±Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ âœ¨
                    </button>
                    <div id="mantra-loading" class="hidden mt-4 flex justify-center items-center">
                        <div class="animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-purple-500"></div>
                    </div>
                </div>

                <div class="space-y-4">
                    <h4 class="text-xl font-bold text-purple-400">Ø¢Ù¾Ù„ÙˆØ¯ Assets</h4>
                    <form id="character-upload-form" class="space-y-2">
                        <label for="upload-type" class="block text-gray-400">Ù†ÙˆØ¹ ÙØ§ÛŒÙ„:</label>
                        <select id="upload-type" class="w-full px-4 py-2 rounded-lg bg-gray-700 text-white border border-gray-600 focus:outline-none focus:ring-2 focus:ring-yellow-400">
                            <option value="image">ØªØµÙˆÛŒØ±</option>
                            <option value="video">ÙˆÛŒØ¯ÛŒÙˆ</option>
                        </select>
                        <input type="file" id="upload-file" class="w-full px-4 py-2 rounded-lg bg-gray-700 text-white border border-gray-600 focus:outline-none focus:ring-2 focus:ring-yellow-400" required>
                        <div class="flex items-center space-x-reverse space-x-4">
                            <button type="submit" id="upload-btn" class="px-6 py-2 bg-yellow-400 hover:bg-yellow-500 text-gray-900 font-bold rounded-lg transition-colors duration-300">Ø¢Ù¾Ù„ÙˆØ¯</button>
                            <p id="upload-progress" class="hidden text-sm text-gray-400"></p>
                        </div>
                    </form>
                </div>
            </div>

            <hr class="my-6 border-gray-700" />
            
            <h4 class="text-xl font-bold text-purple-400">Ú¯Ø§Ù„Ø±ÛŒ Assets</h4>
            <div id="character-gallery" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mt-4">
            </div>

        </div>
    </div>

    <!-- Project Summary Modal -->
    <div id="summary-modal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4 modal-bg">
        <div class="bg-gray-800 p-8 rounded-2xl shadow-2xl w-full max-w-lg border border-purple-700 space-y-6">
            <div class="flex justify-between items-center border-b border-gray-700 pb-4">
                <h3 class="text-3xl font-bold text-yellow-400">Ø®Ù„Ø§ØµÙ‡ Ù†Ù‚Ø´Ù‡ Ø±Ø§Ù‡ Ù¾Ø±ÙˆÚ˜Ù‡</h3>
                <button id="close-summary-modal" class="text-gray-400 hover:text-white text-2xl">&times;</button>
            </div>
            <div id="summary-content" class="text-lg text-gray-300 space-y-4">
                <div class="flex justify-center items-center h-48">
                    <div class="animate-spin rounded-full h-20 w-20 border-t-2 border-b-2 border-purple-500"></div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
